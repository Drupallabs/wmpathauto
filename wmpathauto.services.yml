services:
    plugin.manager.wmpathauto_alias_builder:
        class: Drupal\wmpathauto\AliasBuilderManager
        parent: default_plugin_manager

    plugin.manager.wmpathauto_pattern_builder:
        class: Drupal\wmpathauto\PatternBuilderManager
        parent: default_plugin_manager

    plugin.manager.wmpathauto_pattern_dependencies:
        class: Drupal\wmpathauto\PatternDependenciesManager
        parent: default_plugin_manager

    plugin.manager.wmpathauto_pattern_token_dependencies:
        class: Drupal\wmpathauto\PatternTokenDependenciesManager
        parent: default_plugin_manager

    wmpathauto.pattern.dependency_resolver:
        class: Drupal\wmpathauto\PatternDependencyResolver
        arguments:
            - '@token'
            - '@token.entity_mapper'
            - '@pathauto.alias_cleaner'
            - '@plugin.manager.wmpathauto_alias_builder'
            - '@plugin.manager.wmpathauto_pattern_builder'
            - '@plugin.manager.wmpathauto_pattern_dependencies'
            - '@plugin.manager.wmpathauto_pattern_token_dependencies'

    wmpathauto.pattern_dependencies.subscriber:
        class: Drupal\wmpathauto\EventSubscriber\PatternDependenciesSubscriber
        arguments:
            - '@keyvalue'
            - '@wmpathauto.pattern.dependency_resolver'
        tags: [{ name: event_subscriber }]

    wmpathauto.pattern_builder.subscriber:
        class: Drupal\wmpathauto\EventSubscriber\PatternBuilderSubscriber
        arguments:
            - '@plugin.manager.wmpathauto_pattern_builder'
        tags: [{ name: event_subscriber }]

    wmpathauto.alias_builder.subscriber:
        class: Drupal\wmpathauto\EventSubscriber\AliasBuilderSubscriber
        arguments:
            - '@plugin.manager.wmpathauto_alias_builder'
        tags: [{ name: event_subscriber }]

    wmpathauto.dependency_update.subscriber:
        class: Drupal\wmpathauto\EventSubscriber\DependencyUpdateSubscriber
        arguments:
            - '@keyvalue'
            - '@queue'
        tags: [{ name: event_subscriber }]
